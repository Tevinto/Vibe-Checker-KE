from flask import Flask, render_template, request
import random

app = Flask(__name__)

# Simple keyword-to-vibe mappings
vibes = {
    "sherehe": ("Sherehe Minister ğŸ‰", 95),
    "chapaa": ("Money Moves Only ğŸ’¸", 90),
    "msupa": ("Certified Msupa wa Power ğŸ’…", 92),
    "msee": ("Real G Vibes ğŸ§¢", 85),
    "ndai": ("Cruising in Style ğŸš—", 87),
    "ushago": ("Ocha Mode Activated ğŸŒ¾", 70),
    "nyama": ("Choma Chief ğŸ–", 89),
    "niaje": ("Niaje Budah Energy ğŸ¤", 78),
    "sasa": ("Sasa Fiti Vibes ğŸ‘‹", 75),
    "hustle": ("Hustle Nation Certified ğŸ’¼", 91),
    "mpesa": ("Till Number Vibes ğŸ“²", 84),
    "sponsor": ("Soft Life Activated ğŸ’…", 93),
    "gava": ("Gava Approved Moves ğŸ›ï¸", 79),
    "siku hizi": ("Gen Z Nairobi Mood ğŸ§ƒ", 77),
    "form": ("Form Ni Gani? Energy ğŸ”¥", 88),
    "cheza kama wewe": ("Main Character on the Dancefloor ğŸ’ƒ", 94),
    "mapema": ("Mapema Ndio Best â°", 86),
    "riggy g": ("Deputy Vibes Only ğŸ§¢", 80),
    "wueh": ("Wueh! Shocked but Vibing ğŸ˜³", 73),
    "sina maoni": ("Silent But Deadly Vibes ğŸ¤«", 76),
    "tulia": ("Chillax Boss ğŸ˜Œ", 72),
    "mambo": ("Mambo Iko Sawa ğŸŒ", 78),
    "vibing": ("Vibes on Vibes ğŸ”¥", 89),
    "drip": ("Dripped Out Dripmaster ğŸ’§", 91),
    "chill": ("Cooler Than a Freezer â„ï¸", 74),
    "pressure": ("Pressure Ziko ğŸ”¥", 68),
    "ghosted": ("Casper Vibes ğŸ‘»", 50),
    "nyash": ("Certified Nyash Analyst ğŸ‘", 88),
    "sambaza": ("Sambaza the Vibes ğŸ“¡", 83),
    "mambo ni mengi": ("Too Much Sauce ğŸ¥µ", 69),
    "soko": ("Market Mood Activated ğŸ›’", 77),
    "squad": ("Squad Goals Achieved ğŸ‘¯", 86),
    "vibaya": ("Vibes Gone South ğŸ˜¬", 52),
    "siku": ("Siku Fiti Energy ğŸŒ¤ï¸", 75),
    "mrembo": ("Slay Queen Certified ğŸ‘‘", 90),
    "budah": ("Budah Mode: ON ğŸ§¢", 82),
    "kanairo": ("Kanairo Chronicles ğŸ™ï¸", 88),
    "matatu": ("Stage Commander Energy ğŸš", 80),
    "mjengo": ("Hard Hat Hustler ğŸ§±", 72),
    "kibanda": ("Kibanda Connoisseur ğŸ›", 76),
    "viboko": ("Discipline Energy ğŸª­", 60),
    "sambaza": ("Vibe Distributor ğŸ“¡", 83),
    "mchongo": ("Mchongo Mastermind ğŸ’¼", 85),
    "soko": ("Soko Hustler ğŸ›ï¸", 79),
    "supu": ("Supu Slayer ğŸ²", 74),
    "kizunguzungu": ("Dizzy With Vibes ğŸŒ€", 66),
    "mambo vipi": ("Mambo Vipi Mood ğŸŒˆ", 77),
    "sina stress": ("Unbothered & Thriving ğŸ˜", 88),
    "sina time": ("Booked & Busy ğŸ•’", 84),
    "sina pesa": ("Broke But Vibing ğŸ’€", 62),
    "sina story": ("Lowkey Legend ğŸ¤«", 76),
    "sina energy": ("Battery Low Mode ğŸ”‹", 58),
    "sina brakes": ("No Brakes, Just Vibes ğŸï¸", 90),
    "sina filter": ("Raw & Real Energy ğŸ¤", 81),
    "sina shame": ("Shameless Vibes Only ğŸ˜ˆ", 79),
    "sina chills": ("Zero Chill Detected ğŸ¥¶", 73),
    "sina morals": ("Morals Left the Chat ğŸ˜…", 70),
    "sina plan": ("Freestyling Life ğŸ²", 68),
    "sina clue": ("Lost But Vibing ğŸ§­", 65),
    "sina brakes": ("Full Send Energy ğŸš€", 91),

}
fallbacks = [
    ("Vibe iko low, jaribu tena ğŸ˜¶", random.randint(40, 65)),
    ("Uko na mysterious aura ğŸ¤”", random.randint(55, 70)),
    ("Hakuna vibe hapa bana ğŸ˜¬", random.randint(45, 68)),
    ("Vibe haijakam, pole sana ğŸ˜…", random.randint(50, 69)),
    ("Pressure ni ya gava, si wewe ğŸ˜¤", random.randint(50, 66)),
    ("Umeachwa na vibe kama ex ğŸ˜­", random.randint(42, 64)),
    ("Vibe yako imeenda ushago ğŸŒ¾", random.randint(48, 67)),
    ("Si poa, jaribu tena kesho ğŸ˜", random.randint(45, 65)),
    ("Vibe yako iko kwa matatu wrong route ğŸš", random.randint(43, 66)),
    ("Umeangusha vibe kama KCSE ya 2012 ğŸ“‰", random.randint(40, 63)),
    ("Vibe yako ni kama chai bila mkate â˜•", random.randint(44, 68)),
    ("Uko na silent disco ya one person ğŸ§", random.randint(46, 69)),
    ("Vibe imepotea kama network ya Safaricom ğŸ“µ", random.randint(41, 65)),
    ("Hii caption ni kama ugali bila sukuma ğŸ˜¬", random.randint(43, 67)),
    ("Vibe yako ni kama jaba ya expired ğŸ˜µ", random.randint(40, 62)),
    ("Caption yako iko na blackout âš¡", random.randint(42, 66)),
    ("Vibe yako ni kama matatu ya Rongaiâ€”haijafika bado ğŸšŒ", random.randint(45, 68)),
    ("Umejaribu, lakini bado haijakam ğŸ˜“", random.randint(47, 69)),
    ("Vibe yako ni kama nyoka kwa bible study ğŸğŸ“–", random.randint(44, 66)),
    ("Caption yako iko na stress ya landlord ğŸ ", random.randint(46, 68)),
    ("Vibe yako ni kama WiFi ya neighborâ€”imefungwa ğŸ”’", random.randint(43, 65)),
    ("Uko na energy ya Monday morning ğŸ˜©", random.randint(42, 64)),
    ("Caption yako ni kama chai ya hostelâ€”too weak â˜•", random.randint(45, 67)),
    ("Vibe yako ni kama mtu wa mjengo kwa sherehe ğŸ§±", random.randint(41, 63)),
    ("Umevaa drip ya emotions but hakuna vibe ğŸ’§", random.randint(44, 66)),
    ("Vibe yako ni kama password ya exâ€”imekuwa changed ğŸ”", random.randint(43, 65)),
    ("Caption yako ni kama nywele ya kinyozi wa 50 bob âœ‚ï¸", random.randint(40, 62)),
    ("Vibe yako ni kama TikTok ya 2 views ğŸ“±", random.randint(45, 68)),
    ("Umeachwa na vibe kama mtu wa last born ğŸ˜­", random.randint(42, 64)),
    ("Caption yako ni kama ugali ya microwave ğŸ½ï¸", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group projectâ€”missing ğŸ˜…", random.randint(41, 63)),
    ("Uko na energy ya mtu alikosa chai ya staffroom â˜•", random.randint(43, 66)),
    ("Vibe yako ni kama password ya WiFi ya gavaâ€”classified ğŸ”’", random.randint(45, 68)),
    ("Caption yako ni kama jua ya Januaryâ€”too harsh â˜€ï¸", random.randint(46, 69)),
    ("Vibe yako ni kama mtu wa sherehe bila fare ğŸ‰ğŸš«", random.randint(42, 65)),
    ("Umechoka kama simu ya kabambe ğŸ”‹", random.randint(40, 62)),
    ("Vibe yako ni kama mtu wa TikTok na 0 likes ğŸ˜¬", random.randint(43, 66)),
    ("Caption yako ni kama ugali ya hostelâ€”dry ğŸ˜©", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group chatâ€”ghosted ğŸ‘»", random.randint(41, 64)),
    ("Uko na energy ya mtu alikosa chai ya kanisa â˜•", random.randint(45, 68)),
    ("Vibe yako ni kama password ya exâ€”umeachwa ğŸ˜­", random.randint(42, 65)),
    ("Caption yako ni kama jaba ya expired ğŸ˜µ", random.randint(40, 63)),
    ("Vibe yako ni kama mtu wa mjengo kwa sherehe ğŸ§±", random.randint(44, 66)),
    ("Umevaa drip ya emotions but hakuna vibe ğŸ’§", random.randint(43, 65)),
    ("Vibe yako ni kama password ya WiFi ya gavaâ€”classified ğŸ”’", random.randint(45, 68)),
    ("Caption yako ni kama nywele ya kinyozi wa 50 bob âœ‚ï¸", random.randint(40, 62)),
    ("Vibe yako ni kama TikTok ya 2 views ğŸ“±", random.randint(45, 68)),
    ("Umeachwa na vibe kama mtu wa last born ğŸ˜­", random.randint(42, 64)),
    ("Caption yako ni kama ugali ya microwave ğŸ½ï¸", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group projectâ€”missing ğŸ˜…", random.randint(41, 63)),
    ("Uko na energy ya mtu alikosa chai ya staffroom â˜•", random.randint(43, 66)),
    ("Vibe yako ni kama password ya WiFi ya gavaâ€”classified ğŸ”’", random.randint(45, 68)),
    ("Caption yako ni kama jua ya Januaryâ€”too harsh â˜€ï¸", random.randint(46, 69)),
    ("Vibe yako ni kama mtu wa sherehe bila fare ğŸ‰ğŸš«", random.randint(42, 65)),
    ("Umechoka kama simu ya kabambe ğŸ”‹", random.randint(40, 62)),
    ("Vibe yako ni kama mtu wa TikTok na 0 likes ğŸ˜¬", random.randint(43, 66)),
    ("Caption yako ni kama ugali ya hostelâ€”dry ğŸ˜©", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group chatâ€”ghosted ğŸ‘»", random.randint(41, 64)),
    ("Uko na energy ya mtu alikosa chai ya kanisa â˜•", random.randint(45, 68)),
    ("Vibe yako ni kama password ya exâ€”umeachwa ğŸ˜­", random.randint(42, 65)),
    ("Caption yako ni kama jaba ya expired ğŸ˜µ", random.randint(40, 63)),
    ("Vibe yako ni kama mtu wa mjengo kwa sherehe ğŸ§±", random.randint(44, 66)),
    ("Umevaa drip ya emotions but hakuna vibe ğŸ’§", random.randint(43, 65)),
    ("Vibe yako ni kama password ya WiFi ya gavaâ€”classified ğŸ”’", random.randint(45, 68)),
    ("Caption yako ni kama nywele ya kinyozi wa 50 bob âœ‚ï¸", random.randint(40, 62)),
    ("Vibe yako ni kama TikTok ya 2 views ğŸ“±", random.randint(45, 68)),
    ("Umeachwa na vibe kama mtu wa last born ğŸ˜­", random.randint(42, 64)),
    ("Caption yako ni kama ugali ya microwave ğŸ½ï¸", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group projectâ€”missing ğŸ˜…", random.randint(41, 63)),
    ("Uko na energy ya mtu alikosa chai ya staffroom â˜•", random.randint(43, 66)),
    ("Vibe yako ni kama password ya WiFi ya gavaâ€”classified ğŸ”’", random.randint(45, 68)),
    ("Caption yako ni kama jua ya Januaryâ€”too harsh â˜€ï¸", random.randint(46, 69)),
    ("Vibe yako ni kama mtu wa sherehe bila fare ğŸ‰ğŸš«", random.randint(42, 65)),
    ("Umechoka kama simu ya kabambe ğŸ”‹", random.randint(40, 62)),
    ("Vibe yako ni kama mtu wa TikTok na 0 likes ğŸ˜¬", random.randint(43, 66)),
    ("Caption yako ni kama ugali ya hostelâ€”dry ğŸ˜©", random.randint(44, 67)),
    ("Vibe yako ni kama mtu wa group chatâ€”ghosted ğŸ‘»", random.randint(41, 64)),
    ("Uko na energy ya mtu alikosa chai ya kanisa â˜•", random.randint(45, 68)),
    ("Vibe yako ni kama password ya exâ€”umeachwa ğŸ˜­", random.randint(42, 65)),
    ("Caption yako ni kama jaba ya expired ğŸ˜µ", random.randint(40, 63)),
    ("Vibe yako ni kama mtu wa mjengo kwa sherehe ğŸ§±", random.randint(44, 66)),]
    
def analyze_vibe(caption):
    for word, (vibe, score) in vibes.items():
        if word in caption:
            return {"vibe": vibe, "score": score}
    vibe, score = random.choice(fallbacks)
    return {"vibe": vibe, "score": score}

@app.route("/", methods=["GET", "POST"])
def home():
    result = None
    if request.method == "POST":
        caption = request.form["caption"].lower()
        result = analyze_vibe(caption)
    return render_template("index.html", result=result)


if __name__ == "__main__":
    app.run(debug=True)